
[{"content":"","date":"22 December 2024","externalUrl":null,"permalink":"/tags/linux/","section":"Tags","summary":"","title":"Linux","type":"tags"},{"content":"","date":"22 December 2024","externalUrl":null,"permalink":"/series/proxmox-ve/","section":"Series","summary":"","title":"Proxmox VE","type":"series"},{"content":"","date":"22 December 2024","externalUrl":null,"permalink":"/tags/pve/","section":"Tags","summary":"","title":"PVE","type":"tags"},{"content":"","date":"22 December 2024","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","date":"22 December 2024","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"22 December 2024","externalUrl":null,"permalink":"/","section":"Welcome to Quentin's Space! 🎉","summary":"","title":"Welcome to Quentin's Space! 🎉","type":"page"},{"content":" 1. 登录 PVE Web 管理页面 # 打开浏览器，输入系统提示的登录地址（例如：这里是 https://10.10.1.201:8006 ）。 出现不安全提示不用怕，点击 高级。 点击 继续访问 10.10.1.201（不安全） 。 输入管理员名称和密码，点击登录。 成功登录 PVE 管理页面。 2. PVE 订阅与仓库管理 # PVE 仓库管理 # Proxmox VE Enterprise repository- PVE 企业仓库包：/etc/apt/sources.list.d/pve-enterprise.list Proxmox VE No-Subscription or Free repository- PVE 非订阅仓库包：/etc/apt/sources.list.d/pve-no-subscription.list Proxmox VE Test repository- PVE 测试仓库包 由于 PVE 基于 Debian 系统，所以 PVE 也使用 APT 作为系统的包管理工具。因为大部分个人使用 PVE 系统的目的要么是基于学习、要么是搭建个人服务器，于是在此处，我们会关闭 Proxmox VE Enterprise repository 企业库。但为了能获得社区的支持以及版本的更新，在这里会开启 Proxmox VE No-Subscription repository。 基于以上要求，可以分别在 PVE WebGUI 管理页面或节点（node）的 Shell 中进行操作：\nCLI # 在 PVE WebGUI 管理页面中，依次选择节点 → Shell（或通过SSH登录） 进入命令行管理后台。 执行命令 vim.tiny /etc/apt/sources.list.d/pve-enterprise.list 打开文件，将光标移动到行头，然后键盘输入 i 进入编辑模式，输入 # 字符，并点击 esc 退出编辑，再连续输入两个大写的 ZZ 保存文件并退出。 继续执行 vim.tiny /etc/apt/sources.list.d/pve-no-subscription.list 打开 PVE 非订阅文件，将光标移动到行头，键盘输入 x 键删除 # 字符以启动非订阅仓库，输入两个大写 ZZ 保存并退出文件。 WebGUI # 进入 PVE WebGUI 管理页面，依次选择节点 → Repositories，进入仓库管理页面。 在右侧的资源中心面板中选择 pve-enterprise 企业库，然后点击上方的 Disable 按钮关闭 PVE 企业库。 继续在该面板中选择 pve-no-subscription 非订阅库，然后点击上方的 Enable 按键以启动 PVE 非订阅库。 移除登录 PVE WebGUI 管理页面后的订阅通知（PVE 8.02以后版本已失效） # 在未获得 PVE 企业订阅授权时，每次登录 PVE Web 管理页面时，总是会弹出一个 No valid subscription 窗口提示，可以进行如下操作删除这个弹出框。 切换目录 cd /usr/share/javascript/proxmox-widget-toolkit 备份文件 cp proxmoxlib.js proxmoxlib.js.bak 编辑文件 vim.tiny proxmoxlib.js 定位到如下代码行 Ext.Msg.show({ title: gettext(\u0026#39;No valid subscription\u0026#39;), 用 void 替换 Ext.Msg.show void({ //Ext.Msg.show({ title: gettext(\u0026#39;No valid subscription\u0026#39;), 重新启动 PVE Web 服务器 systemctl restart pveproxy.service 3. 探索 PVE WebGUI 管理界面 # PVE WebGUI 管理页面布局分为四个部分：\n页头 资源中心 内容面板 日志面板 1. 页头 # 最上方的页头区域包括：\nDocumentation：打开一个本地 PVE 文档。 Create VM：创建虚拟机。 Create CT：创建容器。 2. 资源中心 # Datacenter：包含了所有集群（Cluster）的设置。 Node：可以在此级别单独管理集群中的节点。 Guest：创建的虚拟机和容器。可在此级别管理具体的客户虚拟机。 Storage：数据存储中心。可在此选项中观察进行存储管理。 3. 内容面板 # 各个资源中心都有自己专用的内容面板管理页面，具体有如下几个：\n数据中心（Datacenter） # 数据中心主要进行集群节点的设置，具体有如下配置：\nSummary：显示了集群节点的整体运行状态和资源使用情况。 Cluster：集群功能。 Options：集群的默认配置，包括键盘布局、代理、等设置。 Storage：集群存储管理。 Permission：管理用户、组和 API 令牌权限，以及 LDAP、MS-AD 和双因素（Two-Factor）身份验证。 HA：管理 PVE 高可用。 ACME：为服务器节点设置 ACME 证书。 Firewall：防火墙设置。 节点（Node） # 单个节点的配置与管理。右上方有几个快捷按钮，分别是重启节点（Reboot）、关机（Shutdown）、节点终端（Shell）、批量任务（Bulk Actions）。 重点关注以下选项：\nSummary：显示节点的资源使用情况。 Shell：访问节点的终端接口。 System：配置网络、DNS和时间设置，并可查看系统日志。 Disks：查看连接的磁盘状态。 客户机（Guests） # 客户机分为基于 KVM （Kernel-based Virtual Machine） 的虚拟机和基于 LXC（Linux Container） 的容器。 页头的右上方包含一些快捷按钮，分别是启动（Start）、关机（Shutdown）、终端控制台（Console）、克隆（Clone）、迁移等。 客户机重点关注以下选项：\nSummary：虚拟机的基本信息。 Console：虚拟机控制台入口。 (KVM)Hardware：定义虚拟机可用的硬件。 (LXC)Resources：定义容器可用的系统资源。 Options：客户机配置信息。 Backup：创建和恢复系统备份。 Snapshots：创建和恢复虚拟机快照。 存储（Storage） # 这里显示了集群数据中心挂载的所有存储设备。\nSummary：显示有关存储的重要信息，如存储的类型、用途和内容。 Content：存储的每种内容类型的菜单项，包括： ISO Images：上传或下载的虚拟机镜像。 CT Templates：上传或下载的 LXC 容器模板。 Backups：虚拟机备份。 VM Disks：QEMU/KVM 客户虚拟机镜像（VM images）。 CT Volumes：容器数据卷。 Permissions: 管理存储权限。 4. 日志面板 # 日志面板的具体用处有如下几点：\n向用户显示集群节点当前正在发生的事情； 在后台执行创建虚拟机这类操作，并将这种操作称为任务（task）； 将任务的所有输出保存在一个单独的日志文件中，只需双击任务日志即可查看； 终止正在运行的任务。 4. 修改 PVE IP 地址 # 如果因为某些原因需要修改 PVE IP 地址，则需要对如下三处进行修改。\n/etc/network/interfaces /etc/hosts /etc/issue 重启系统 参考资料： # PVE GUI 文档 PVE 仓库包文档 移除 PVE 订阅通知 PVE 内容面板文档 ","date":"22 December 2024","externalUrl":null,"permalink":"/series/proxomox-ve/%E9%85%8D%E7%BD%AE-%E6%8E%A2%E7%B4%A2-proxmox-ve-webgui-%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2/","section":"Series","summary":"","title":"配置 \u0026 探索 Proxmox VE WebGUI 管理页面","type":"series"},{"content":" 0.安装前的准备工作 # 一台符合PVE系统硬件要求电脑（以下为官方推荐配置）： 支持带有 Intel VT/AMD-V （即支持虚拟化技术）技术的 64 位 CPU。 官方推荐最少也要 2G 的运行内存，内存当然是越大越好，内存越大，能开的虚拟机就越多。 推荐使用 SSD 作为存储并运行操作系统的介质。 虚拟机（VM）的存储，可采用多种存储方式，比如本地存储（ZFS、DIR），共享存储（NFS、CIFS）和分布式存储（CephFS）。 可多配置几个 NIC（网卡），系统也支持 10 Gbit 网卡。 对于 PCIe 设备直通，还需要 CPU 支持 VT-d/AMD-d 。 一根网线：推荐使用超六类网线。 一个安装\u0026amp;启动系统的 U 盘：容量至少在 8G 以上。 U 盘格式化\u0026amp;启动工具： MacOS \u0026amp; Linux 推荐使用：balenaEtcher Windows 推荐使用：Rufus 1.下载 PVE 官方镜像（ISO）文件 # 从 Proxmox 官方网站 下载 Proxmox VE ISO 文件。选择最新 Proxmox VE 版本（我这里是8.0-2版本），点击 Download 下载。 验证镜像正确性，输入如下命令验证 PVE 镜像文件（为了安全起见，务必在下载完 PVE 镜像以后验证其正确性。）： sha256sum proxmox-ve_8.0-2.iso # 输出 e2b27648a8a91c0da1e8e718882a5ff87a8f054c4dd7e0ea1d8af85125d82812 proxmox-ve_8.0-2.iso 如果输出结果与官网的 SHA256SUM 一样，则表示文件可靠，可放心使用；如果输出结果不一样，则要谨慎使用，以防被他人篡改。 不只是 PVE 镜像文件，其他的镜像文件，比如 Debian、OpenMediaVault……也都应该去验证其正确性，尤其是从第三方渠道下载的文件。 2.制作 U 盘引导盘（这里使用 balenaEtcher 制作引导盘） # 插入U盘并启动 balenaEtcher； 选择已经下载好的 PVE 镜像文件 proxmox-ve_8.0-2.iso 。 选择要写入 PVE 系统的 U 盘（这里选择的是一个 32G 的 Kingston U盘）。 完成以上配置，点击 Flash 开始制作引导盘。 等待写入中\u0026hellip;\u0026hellip; 显示如下，表示引导盘已经制作成功，准备下一步安装系统。 3.开始安装 # 一个节点（node）的 Proxmox VE 系统安装相对比较简单，几乎只需选择默认选项再点击下一步即可完成，但需要注意的是其中的网络信息设置。下面开始正式安装系统：\n将 U 盘插入电脑，然后开机进入 BIOS 设置，设置 U 盘为第一启动盘。 进入 PVE 安装界面，选择 Install Proxmox VE (Graphical) 开始安装。 选择 I agree ，进入下一步。 选择要安装的目标磁盘。 此外，如果需要对存储磁盘做进一步的配置，可点击右边的 Options ，选择最适合你需求的文件系统。这里我们选择 ext4 文件系统。 其中的一些选项说明： hdsize：安装 Proxmox 所使用的总硬盘大小。 swapsize：定义交换分区的大小。 maxroot：定义 /root 分区所占用的最大硬盘空间。 minfree：定义 Proxmox 安装完成后所保留的最小可用空间。 maxvz：定义数据分区所占用的最大硬盘空间。数据分区一般指的是 /var/lib/vz 目录。 如果要选择 ZFS 文件格式，可参考： Advanced ZFS Configuration Optionshttps: pve.proxmox.com/pve-docs/pve-admin-guide.html#advanced_zfs_options ZFS on Linux: https://pve.proxmox.com/pve-docs/pve-admin-guide.html#chapter_zfs ZFS: https://en.wikipedia.org/wiki/ZFS 配置地区/国家和键盘布局。 配置管理员密码和邮箱。 网络配置: 网口：如果有多个网口，IP地址一定要与网口相配合。 主机名：可根据自己喜好随意取。 IP地址及子网掩码：这里的IP地址就是 PVE 主机IP地址，也是 PVE Web管理页面访问地址。 默认网关：一般默认即可，安装程序会自动识别网络中的路由器网关地址。 DNS服务器：默认即可。 确认配置，最后点击安装。 等待安装\u0026hellip;\u0026hellip; 完成安装，点击重启。 进入 GRUB 引导页面，选择第一项 Proxmox VE GNU/Linux 进入系统。! 进入系统，如下所示，则表示系统已正常启动。 相关资料 # 文档 Virtual Machines B站司波图 ","date":"21 December 2024","externalUrl":null,"permalink":"/series/proxomox-ve/%E5%AE%89%E8%A3%85-proxmox-virtual-environment-ve/","section":"Series","summary":"","title":"安装 Proxmox Virtual Environment (VE)","type":"series"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"学习使用 Proxmox VE 如何搭建家庭服务器。\n","externalUrl":null,"permalink":"/series/proxomox-ve/","section":"Series","summary":"","title":"Proxmox VE","type":"series"}]